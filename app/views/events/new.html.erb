<div class="box">
    <h1 class="title is-1 center"> New Event </h1>

    <%= form_for @event do |f| %>
        <div class="field">
            <%= f.label :title, class: 'label' %>
            <%= f.text_field :title, autofocus: true, class: 'input' %>
        </div>

        <div class="field">
            <%= f.label :city, class: 'label' %>
            <%= f.text_field :city, class: 'input' %>
        </div>

        <div class="field">
            <%= f.label :description, class: 'label' %>
            <%= f.text_area :description, class: 'textarea' %>
        </div>

        <div class="field">
            <%= f.label :start_time, class: 'label' %>
            <%= f.datetime_local_field :start_time %>
        </div>

        <div class="field">
            <%= f.label :address, class: 'label' %>
            <%= f.text_field :address, class: 'input' %>
        </div>

        <div class="field">
            <%= f.label :link, class: 'label' %>
            <%= f.text_field :link, class: 'input' %>
        </div>

        <div class="field">
            <%= f.label :cover, class: 'label' %>
            <%= f.file_field :cover %>
        </div>

        <div>
            <%= f.submit "Create", class: 'button' %>
            <a href="<%= events_path %>" class="button">Back</a>
        </div>
    <% end %>
</div>

<script>
  $("#event_address").suggestions({
      serviceUrl: "https://dadata.ru/api/v2",
      token: "<%=ENV['DADATA_API_KEY']%>",
      type: "ADDRESS",
      count: 5,
      onSelect: function(suggestion) {
          $('#event_address').val(suggestion.value);
          $('#event_city').val(suggestion.data.city);
      }
  });
</script>
